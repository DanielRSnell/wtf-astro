---
export const prerender = false;

import { getCollection, type CollectionEntry } from 'astro:content';
import Layout from '../../layouts/base.astro';
import { ResourceDirectory } from '@/components/resource-directory.tsx';

// Get all WooCommerce hosting resources from the wordpress-resource collection
const wooHostingResources = await getCollection('wordpress-resource', (resource) => {
  const categories = Array.isArray(resource.data.category) 
    ? resource.data.category 
    : [resource.data.category];
  return categories.includes('woocommerce-hosting');
});

// Get the category data
const categories = await getCollection('wordpress-category');
const categoryData = categories.find(cat => cat.data.category === 'woocommerce-hosting');

// Get WooCommerce hosting-related blog posts
const wooHostingPosts = await getCollection('blog', (post) => {
  return post.data.tags?.some(tag => 
    tag.toLowerCase().includes('woocommerce') && tag.toLowerCase().includes('hosting') ||
    tag.toLowerCase().includes('ecommerce') ||
    wooHostingResources.some(hosting => 
      post.data.title.toLowerCase().includes(hosting.data.title.toLowerCase()) ||
      post.data.tags?.some(postTag => postTag.toLowerCase().includes(hosting.data.title.toLowerCase()))
    )
  );
});

const pageTitle = "WooCommerce Hosting Solutions";
const pageDescription = "Find the best hosting for WooCommerce stores. Compare performance-optimized hosting providers built for eCommerce success.";
---

<Layout title={pageTitle} description={pageDescription}>
  <ResourceDirectory
    client:load
    data-theme="bright-dark"
    category="woocommerce-hosting"
    title="WooCommerce Hosting"
    description="High-performance hosting optimized for WooCommerce stores"
    resources={wooHostingResources}
    relatedPosts={wooHostingPosts}
    baseUrl="/woocommerce-hosting"
    categoryData={categoryData}
  />
</Layout>